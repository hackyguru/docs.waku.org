"use strict";(self.webpackChunkwaku_guide=self.webpackChunkwaku_guide||[]).push([[158],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>k});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=i.createContext({}),u=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=u(e.components);return i.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,k=d["".concat(p,".").concat(m)]||d[m]||c[m]||o;return n?i.createElement(k,a(a({ref:t},l),{},{components:n})):i.createElement(k,a({ref:t},l))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:r,a[1]=s;for(var u=2;u<o;u++)a[u]=n[u];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},36280:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var i=n(87462),r=(n(67294),n(3905));const o={title:"Run @waku/sdk in a NodeJS Application"},a=void 0,s={unversionedId:"guides/js-waku/run-waku-nodejs",id:"guides/js-waku/run-waku-nodejs",title:"Run @waku/sdk in a NodeJS Application",description:"While the @waku/sdk package is primarily designed for browser environments, you can use it in a NodeJS application. However, there are certain limitations and considerations to keep in mind. This guide provides a comprehensive overview of using @waku/sdk in NodeJS.",source:"@site/docs/guides/js-waku/run-waku-nodejs.md",sourceDirName:"guides/js-waku",slug:"/guides/js-waku/run-waku-nodejs",permalink:"/guides/js-waku/run-waku-nodejs",draft:!1,editUrl:"https://github.com/waku-org/docs.waku.org/tree/develop/docs/guides/js-waku/run-waku-nodejs.md",tags:[],version:"current",lastUpdatedAt:1692174572,formattedLastUpdatedAt:"16 Aug 2023",frontMatter:{title:"Run @waku/sdk in a NodeJS Application"},sidebar:"guides",previous:{title:"Bootstrap Nodes and Discover Peers",permalink:"/guides/js-waku/configure-discovery"},next:{title:"How to Debug Your Waku DApp and WebSocket",permalink:"/guides/js-waku/debug-waku-dapp"}},p={},u=[{value:"Limitations",id:"limitations",level:2},{value:"API Compatibility",id:"api-compatibility",level:3},{value:"Protocol Implementation",id:"protocol-implementation",level:3},{value:"Codebase Complexity",id:"codebase-complexity",level:3},{value:"Browser-Specific Logic",id:"browser-specific-logic",level:3},{value:"Peer Management",id:"peer-management",level:3},{value:"Recommendations",id:"recommendations",level:2},{value:"Future Developments",id:"future-developments",level:2}],l={toc:u},d="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,i.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"While the ",(0,r.kt)("inlineCode",{parentName:"p"},"@waku/sdk")," package is primarily designed for browser environments, you can use it in a NodeJS application. However, there are certain limitations and considerations to keep in mind. This guide provides a comprehensive overview of using ",(0,r.kt)("inlineCode",{parentName:"p"},"@waku/sdk")," in NodeJS."),(0,r.kt)("h2",{id:"limitations"},"Limitations"),(0,r.kt)("h3",{id:"api-compatibility"},"API Compatibility"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"@waku/sdk")," prioritises browser compatibility, avoiding NodeJS APIs for simpler bundling. This design choice enhances browser API compatibility but sacrifices NodeJS optimisation. While many browser APIs work in NodeJS, they might need better optimisation."),(0,r.kt)("h3",{id:"protocol-implementation"},"Protocol Implementation"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"@waku/sdk")," focuses on the client side of the ",(0,r.kt)("a",{parentName:"p",href:"/overview/concepts/network-domains#requestresponse-domain"},"Request/Response protocol"),". We'll have to replicate all the functionalities added to ",(0,r.kt)("a",{parentName:"p",href:"/guides/run-nwaku-node"},"nwaku")," to implement extra features."),(0,r.kt)("h3",{id:"codebase-complexity"},"Codebase Complexity"),(0,r.kt)("p",null,"Balancing browser and NodeJS compatibility while maintaining simplicity adds complexity. A potential fix is making a NodeJS package that wraps ",(0,r.kt)("inlineCode",{parentName:"p"},"@waku/sdk")," for smoother NodeJS development."),(0,r.kt)("h3",{id:"browser-specific-logic"},"Browser-Specific Logic"),(0,r.kt)("p",null,"Certain features in ",(0,r.kt)("inlineCode",{parentName:"p"},"@waku/sdk")," are tailored for browsers and might not translate seamlessly to NodeJS. For example, ",(0,r.kt)("a",{parentName:"p",href:"/overview/concepts/protocols#relay"},"Relay protocol")," in browsers requires unique ",(0,r.kt)("a",{parentName:"p",href:"/overview/concepts/transports"},"transport methods")," such as ",(0,r.kt)("inlineCode",{parentName:"p"},"WebTransport")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"WebRTC"),", which might not align with NodeJS networking capabilities."),(0,r.kt)("h3",{id:"peer-management"},"Peer Management"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"@waku/sdk")," default peer management caters to the browser's ephemeral nature, which is different for NodeJS. This is why ",(0,r.kt)("a",{parentName:"p",href:"/overview/concepts/dns-discovery"},"DNS Discovery")," and ",(0,r.kt)("a",{parentName:"p",href:"/overview/concepts/peer-exchange"},"Peer Exchange")," are the default discovery mechanisms for the browser but not for NodeJS and desktop applications."),(0,r.kt)("h2",{id:"recommendations"},"Recommendations"),(0,r.kt)("p",null,"Considering these limitations, consider your use case before opting for ",(0,r.kt)("inlineCode",{parentName:"p"},"@waku/sdk")," in NodeJS. For a more optimised solution, we recommend ",(0,r.kt)("a",{parentName:"p",href:"/guides/nwaku/run-docker"},"running nwaku in a Docker container")," and consuming its ",(0,r.kt)("a",{parentName:"p",href:"https://rfc.vac.dev/spec/16/"},"JSON RPC API"),"."),(0,r.kt)("h2",{id:"future-developments"},"Future Developments"),(0,r.kt)("p",null,"There are plans to release a NodeJS package based on ",(0,r.kt)("a",{parentName:"p",href:"/guides/run-nwaku-node"},"nwaku")," to streamline the process of using Waku Network features in NodeJS applications. You can track the progress and updates here: ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/waku-org/nwaku/issues/1332"},"https://github.com/waku-org/nwaku/issues/1332"),"."))}c.isMDXComponent=!0}}]);